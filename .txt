-- Services
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local Camera = workspace.CurrentCamera
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local rootPart = character:WaitForChild("HumanoidRootPart")
local humanoid = character:WaitForChild("Humanoid")

-- GUI Setup
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "CustomGUI"
gui.ResetOnSpawn = false

local mainFrame = Instance.new("Frame", gui)
mainFrame.Size = UDim2.new(0, 400, 0, 350)
mainFrame.Position = UDim2.new(0.5, -200, 0.5, -175)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Visible = true

local titleBar = Instance.new("Frame", mainFrame)
titleBar.Size = UDim2.new(1, 0, 0, 30)
titleBar.BackgroundColor3 = Color3.fromRGB(50, 50, 50)

local titleLabel = Instance.new("TextLabel", titleBar)
titleLabel.Size = UDim2.new(1, 0, 1, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "Custom GUI - Press Q to Toggle"
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
titleLabel.TextSize = 14
titleLabel.Font = Enum.Font.SourceSans

-- GUI Toggle
local guiVisible = true
UserInputService.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.Q then
        guiVisible = not guiVisible
        mainFrame.Visible = guiVisible
    end
end)

-- Tabs Setup
local tabs = {"Exploits", "Visuals"}
local tabButtons = {}
local tabFrames = {}

for i, tabName in ipairs(tabs) do
    local tabButton = Instance.new("TextButton", mainFrame)
    tabButton.Size = UDim2.new(0, 100, 0, 30)
    tabButton.Position = UDim2.new(0, (i - 1) * 100, 0, 30)
    tabButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    tabButton.Text = tabName
    tabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    tabButton.TextSize = 14
    tabButtons[tabName] = tabButton

    local tabFrame = Instance.new("Frame", mainFrame)
    tabFrame.Size = UDim2.new(1, 0, 1, -60)
    tabFrame.Position = UDim2.new(0, 0, 0, 60)
    tabFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    tabFrame.BorderSizePixel = 0
    tabFrame.Visible = (i == 1)
    tabFrames[tabName] = tabFrame

    tabButton.MouseButton1Click:Connect(function()
        for _, frame in pairs(tabFrames) do frame.Visible = false end
        tabFrame.Visible = true
    end)
end

-- **Exploits Tab (Infinite Jump, Fly, No-clip, Spinbot)**
-- Infinite Jump
local infiniteJump = false
local infiniteJumpToggle = Instance.new("TextButton", tabFrames["Exploits"])
infiniteJumpToggle.Size = UDim2.new(0, 200, 0, 30)
infiniteJumpToggle.Position = UDim2.new(0, 10, 0, 10)
infiniteJumpToggle.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
infiniteJumpToggle.Text = "Infinite Jump: OFF"
infiniteJumpToggle.TextColor3 = Color3.fromRGB(255, 0, 0)
infiniteJumpToggle.TextSize = 14

UserInputService.JumpRequest:Connect(function()
    if infiniteJump then
        humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
    end
end)

infiniteJumpToggle.MouseButton1Click:Connect(function()
    infiniteJump = not infiniteJump
    infiniteJumpToggle.Text = infiniteJump and "Infinite Jump: ON" or "Infinite Jump: OFF"
    infiniteJumpToggle.TextColor3 = infiniteJump and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
end)

-- **ESP System Under Visuals**
local espEnabled = {
    Box = false,
    Name = false,
    Distance = false,
    Tracer = false,
    Skeleton = false,
    HealthBar = false,
    TeamCheck = false
}

local function toggleESP(key)
    espEnabled[key] = not espEnabled[key]
end

local espToggles = {
    {"Box ESP", "Box", 10},
    {"Name", "Name", 50},
    {"Distance", "Distance", 90},
    {"Health Bar", "HealthBar", 130},
    {"Tracer", "Tracer", 170},
    {"Skeleton", "Skeleton", 210},
    {"Team Check", "TeamCheck", 250}
}

for _, toggleData in ipairs(espToggles) do
    local toggleName, key, yPos = toggleData[1], toggleData[2], toggleData[3]
    local toggle = Instance.new("TextButton", tabFrames["Visuals"])
    toggle.Size = UDim2.new(0, 200, 0, 30)
    toggle.Position = UDim2.new(0, 10, 0, yPos)
    toggle.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    toggle.Text = toggleName .. ": OFF"
    toggle.TextColor3 = Color3.fromRGB(255, 0, 0)
    toggle.TextSize = 14

    toggle.MouseButton1Click:Connect(function()
        toggleESP(key)
        toggle.Text = toggleName .. (espEnabled[key] and ": ON" or ": OFF")
        toggle.TextColor3 = espEnabled[key] and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
    end)
end

print("GUI fully loaded with all features!")
